<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Believe - Donate</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    .donate-wrap { max-width:700px; margin:28px auto; padding:18px; background:#fff; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.06); }
    .form-row { margin-bottom:12px; }
    label { display:block; margin-bottom:6px; color:#333; }
    input[type="number"], input[type="text"], select, textarea { width:100%; padding:10px; border-radius:6px; border:1px solid #ccc; }
  </style>
</head>
<body>
  <header class="top-bar">
    <a href="index.html" class="brand">Believe</a>
    <nav class="main-nav">
      <ul><li><a href="index.html">Home</a></li><li><a href="projects.html">Projects</a></li></ul>
    </nav>
  </header>

  <main>
    <section class="donate-wrap">
      <h2>Donate to a Project</h2>
      <form id="donate-form">
        <div class="form-row">
          <label>Project ID / Name (auto-filled if you came from a project)</label>
          <input type="text" id="project-field" readonly>
        </div>

        <div class="form-row">
          <label>Amount (BDT)</label>
          <input type="number" id="amount" min="1" required>
        </div>

        <div class="form-row">
          <label>Payment Method</label>
          <select id="pay-method">
            <option value="bkash">bKash</option>
            <option value="bank">Bank Transfer</option>
            <option value="rocket">Rocket</option>
            <option value="card">Card (demo)</option>
          </select>
        </div>

        <div class="form-row">
          <label>Your Email (for receipt)</label>
          <input type="text" id="payer-email" required>
        </div>

        <div style="display:flex;gap:12px;">
          <button class="btn" type="submit">Donate (demo)</button>
          <a class="btn" href="projects.html" style="background:#eee;color:#222;text-decoration:none;">Back to Projects</a>
        </div>
      </form>

      <div id="receipt" style="display:none;margin-top:16px;padding:12px;background:#f9fff6;border:1px solid #e6f5e8;border-radius:6px;">
        <h3>Donation Receipt (Demo)</h3>
        <div id="receipt-body"></div>
      </div>
    </section>
  </main>

  <script>
    // prefill project if query param present
    const urlParams = new URLSearchParams(location.search);
    const projectParam = urlParams.get('project');
    if (projectParam) document.getElementById('project-field').value = projectParam;

    document.getElementById('donate-form').addEventListener('submit', (e) => {
      e.preventDefault();
      const amount = Number(document.getElementById('amount').value);
      const email = document.getElementById('payer-email').value.trim();
      if (!amount || amount <= 0) return alert('Please enter a valid amount.');
      if (!email) return alert('Please enter your email.');
      // Demo: create a local "receipt"
      const id = 'R' + Date.now();
      const body = `
        <p>Receipt ID: <strong>${id}</strong></p>
        <p>Project: <strong>${document.getElementById('project-field').value || 'General Fund'}</strong></p>
        <p>Amount: <strong>à§³${amount.toLocaleString()}</strong></p>
        <p>Payment method: <strong>${document.getElementById('pay-method').value}</strong></p>
        <p>Sent to: <strong>${email}</strong></p>
        <p><em>This is a demo receipt. Real receipts will be generated by the backend later.</em></p>
      `;
      document.getElementById('receipt-body').innerHTML = body;
      document.getElementById('receipt').style.display = 'block';

      // Optionally save to localStorage for demo history
      const history = JSON.parse(localStorage.getItem('donationHistory') || '[]');
      history.push({ id, project: document.getElementById('project-field').value || 'General Fund', amount, email, method: document.getElementById('pay-method').value, ts: Date.now() });
      localStorage.setItem('donationHistory', JSON.stringify(history));
    });
  </script>
</body>
</html>
